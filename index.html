<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SINAQLAR.AZ - Dƒ∞M v…ô Kurs Sƒ±naq PDF-l…ôri</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: #f0f2f5;
            color: #333;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            padding: 15px 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8em;
            font-weight: bold;
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            color: #ffd700;
        }

        .header-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .admin-badge {
            display: none;
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #333;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .admin-badge.active {
            display: block;
        }

        .btn-icon {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .main-container {
            max-width: 1400px;
            margin: 90px auto 20px;
            padding: 20px;
            display: grid;
            grid-template-columns: 280px 1fr 300px;
            gap: 20px;
        }

        @media (max-width: 1200px) {
            .main-container {
                grid-template-columns: 1fr;
            }
            .sidebar {
                display: none;
            }
        }

        .sidebar {
            position: sticky;
            top: 100px;
            height: calc(100vh - 120px);
            overflow-y: auto;
        }

        .nav-menu {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            margin: 5px 0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            color: #333;
            text-decoration: none;
        }

        .nav-item:hover, .nav-item.active {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
        }

        .nav-item i {
            width: 24px;
            text-align: center;
        }

        .admin-menu-item {
            display: none;
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%) !important;
            color: #333 !important;
            font-weight: bold;
        }

        .admin-menu-item.active {
            display: flex;
        }

        .content {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .admin-panel {
            display: none;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border: 3px solid #ffd700;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            color: white;
        }

        .admin-panel.active {
            display: block;
            animation: slideDown 0.5s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            color: #ffd700;
        }

        .admin-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .admin-card {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(255,215,0,0.3);
        }

        .admin-card i {
            font-size: 2em;
            color: #ffd700;
            margin-bottom: 10px;
        }

        .admin-card h3 {
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .admin-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .admin-btn {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #333;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .premium-banner {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #333;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
        }

        .premium-btn {
            background: #333;
            color: #ffd700;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
        }

        .stats-bar {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            text-align: center;
        }

        .stat-icon {
            font-size: 2em;
            color: #2a5298;
            margin-bottom: 10px;
        }

        .stat-number {
            font-size: 1.8em;
            font-weight: bold;
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
        }

        .search-section {
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 1.5em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .search-input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 30px;
            font-size: 16px;
            outline: none;
        }

        .search-input:focus {
            border-color: #2a5298;
        }

        .search-btn {
            padding: 15px 30px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filters {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
            flex: 1;
            min-width: 150px;
        }

        .filter-label {
            font-size: 0.85em;
            color: #666;
            font-weight: 600;
        }

        .filter-select {
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: white;
            font-size: 15px;
            cursor: pointer;
        }

        .quick-filters {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .quick-filter {
            padding: 8px 16px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .quick-filter:hover, .quick-filter.active {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            border-color: transparent;
        }

        .pdf-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .pdf-card {
            background: #f8f9fa;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s;
            border: 2px solid transparent;
            position: relative;
        }

        .pdf-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            border-color: #2a5298;
        }

        .pdf-header {
            height: 200px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            position: relative;
            padding: 20px;
        }

        .pdf-icon {
            font-size: 4em;
            margin-bottom: 10px;
        }

        .pdf-year {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255,255,255,0.9);
            color: #333;
            padding: 5px 12px;
            border-radius: 15px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .pdf-source {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(0,0,0,0.6);
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8em;
        }

        .pdf-badge {
            position: absolute;
            bottom: 15px;
            right: 15px;
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #333;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.75em;
            font-weight: bold;
        }

        .pdf-info {
            padding: 20px;
        }

        .pdf-title {
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 8px;
            line-height: 1.4;
            color: #333;
        }

        .pdf-meta {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 15px;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .pdf-details {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            font-size: 0.85em;
            color: #888;
        }

        .pdf-detail {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .pdf-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9em;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            transition: all 0.3s;
            text-decoration: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }

        .btn-secondary {
            background: #e0e0e0;
            color: #333;
        }

        .btn:hover {
            transform: scale(1.05);
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #e0e0e0;
            border-top-color: #2a5298;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 2000;
        }

        .modal.active {
            display: flex;
            flex-direction: column;
        }

        .modal-header {
            background: #1a1a2e;
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
        }

        .modal-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
        }

        .pdf-viewer {
            flex: 1;
            background: #525659;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: calc(100vh - 60px);
            overflow: auto;
        }

        #pdfCanvas {
            max-width: 95%;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        .admin-login-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 5000;
            justify-content: center;
            align-items: center;
        }

        .admin-login-modal.active {
            display: flex;
        }

        .admin-login-box {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border: 3px solid #ffd700;
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            color: white;
        }

        .admin-login-box h2 {
            color: #ffd700;
            margin-bottom: 20px;
        }

        .admin-code-input {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            border: 2px solid #ffd700;
            border-radius: 10px;
            background: rgba(0,0,0,0.3);
            color: white;
            text-align: center;
            letter-spacing: 5px;
            margin-bottom: 20px;
        }

        .admin-btn {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #333;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
        }

        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            color: #333;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            display: none;
            align-items: center;
            gap: 10px;
            z-index: 4000;
        }

        .toast.show {
            display: flex;
        }

        .widget {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .widget-title {
            font-size: 1.1em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .xp-bar {
            background: #e0e0e0;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .xp-fill {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            height: 100%;
            width: 65%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.75em;
            font-weight: bold;
        }

        .timer-display {
            font-size: 2.5em;
            text-align: center;
            font-family: monospace;
            color: #2a5298;
            margin: 20px 0;
        }

        .timer-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .chat-messages {
            height: 200px;
            overflow-y: auto;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .chat-input {
            display: flex;
            gap: 10px;
        }

        .chat-input input {
            flex: 1;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 20px;
        }

        .mobile-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 10px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
            z-index: 1000;
            justify-content: space-around;
        }

        @media (max-width: 768px) {
            .mobile-nav {
                display: flex;
            }
            .main-container {
                margin-bottom: 80px;
            }
        }

        .mobile-nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #666;
            text-decoration: none;
            font-size: 0.75em;
            gap: 5px;
        }

        .mobile-nav-item.active {
            color: #2a5298;
        }

        .error-message {
            background: #fee;
            color: #c33;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .load-more {
            text-align: center;
            margin-top: 30px;
        }

        .load-more-btn {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 30px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .load-more-btn:hover {
            transform: scale(1.05);
        }

        .results-info {
            background: #e8f4f8;
            border-left: 4px solid #2a5298;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 0 8px 8px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .results-count {
            font-weight: bold;
            color: #2a5298;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <a href="#" class="logo">
                <i class="fas fa-graduation-cap"></i>
                SINAQLAR.AZ
            </a>
            <div class="header-actions">
                <span class="admin-badge" id="adminBadge">
                    <i class="fas fa-crown"></i> ADMIN
                </span>
                <button class="btn-icon" onclick="toggleTheme()" title="Tema">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="btn-icon" onclick="openAdminLogin()" title="Admin">
                    <i class="fas fa-user-shield"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Admin Login Modal -->
    <div class="admin-login-modal" id="adminLoginModal">
        <div class="admin-login-box">
            <i class="fas fa-lock" style="font-size: 3em; color: #ffd700; margin-bottom: 20px;"></i>
            <h2>Admin Giri≈üi</h2>
            <p>≈û…ôxsi kodunuzu daxil edin</p>
            <input type="password" class="admin-code-input" id="adminCodeInput" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" maxlength="6">
            <button class="admin-btn" onclick="checkAdminCode()">
                <i class="fas fa-unlock"></i> Giri≈ü
            </button>
            <p style="margin-top: 15px; font-size: 0.8em; opacity: 0.7;">
                v…ô ya: ‚Üë‚Üë‚Üì‚Üì‚Üê‚Üí‚Üê‚ÜíBA
            </p>
        </div>
    </div>

    <!-- PDF Viewer Modal -->
    <div class="modal" id="pdfModal">
        <div class="modal-header">
            <div style="display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-file-pdf"></i>
                <span id="pdfTitle">PDF Viewer</span>
            </div>
            <div class="modal-actions">
                <button class="modal-btn" onclick="downloadCurrentPDF()">
                    <i class="fas fa-download"></i> Y√ºkl…ô
                </button>
                <button class="modal-btn" onclick="closePDFViewer()">
                    <i class="fas fa-times"></i> Baƒüla
                </button>
            </div>
        </div>
        <div class="pdf-viewer">
            <canvas id="pdfCanvas"></canvas>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Left Sidebar -->
        <aside class="sidebar">
            <div class="nav-menu">
                <div class="nav-item active" onclick="showSection('home')">
                    <i class="fas fa-home"></i>
                    <span>Ana s…ôhif…ô</span>
                </div>
                <div class="nav-item" onclick="filterBySource('Dƒ∞M')">
                    <i class="fas fa-university"></i>
                    <span>Dƒ∞M Sƒ±naqlarƒ±</span>
                </div>
                <div class="nav-item" onclick="filterBySource('Kurs')">
                    <i class="fas fa-school"></i>
                    <span>Kurs Sƒ±naqlarƒ±</span>
                </div>
                <div class="nav-item" onclick="showSection('favorites')">
                    <i class="fas fa-heart"></i>
                    <span>Sevimlil…ôr</span>
                </div>
                <div class="nav-item admin-menu-item" id="adminMenuItem" onclick="toggleAdminPanel()">
                    <i class="fas fa-crown"></i>
                    <span>Admin Panel</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="content">
            <!-- Admin Panel -->
            <div class="admin-panel" id="adminPanel">
                <div class="admin-header">
                    <h2><i class="fas fa-crown"></i> Admin Paneli</h2>
                    <button class="btn-icon" onclick="logoutAdmin()" style="background: rgba(231, 76, 60, 0.2);">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
                <div class="admin-grid">
                    <div class="admin-card">
                        <i class="fas fa-users"></i>
                        <h3>2,847</h3>
                        <p>ƒ∞stifad…ô√ßi</p>
                    </div>
                    <div class="admin-card">
                        <i class="fas fa-file-pdf"></i>
                        <h3 id="adminPdfCount">0</h3>
                        <p>PDF</p>
                    </div>
                    <div class="admin-card">
                        <i class="fas fa-download"></i>
                        <h3>45.2K</h3>
                        <p>Y√ºkl…ôm…ô</p>
                    </div>
                    <div class="admin-card">
                        <i class="fas fa-money-bill-wave"></i>
                        <h3>8,450‚Çº</h3>
                        <p>Qazanc</p>
                    </div>
                </div>
                <div class="admin-actions">
                    <button class="admin-btn" onclick="addNewPDF()">
                        <i class="fas fa-plus"></i> PDF ∆èlav…ô Et
                    </button>
                    <button class="admin-btn" onclick="refreshAllPDFs()">
                        <i class="fas fa-sync"></i> Yenil…ô
                    </button>
                </div>
            </div>

            <!-- Premium Banner -->
            <div class="premium-banner" id="premiumBanner">
                <h3>üëë Premium √úzvl√ºk</h3>
                <p>Limitsiz PDF y√ºkl…ôm…ô, offline rejim, AI k√∂m…ôk√ßi!</p>
                <button class="premium-btn" onclick="openPremiumModal()">ƒ∞ndi Al - 5‚Çº/ay</button>
            </div>

            <!-- Stats -->
            <div class="stats-bar">
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-file-pdf"></i></div>
                    <div class="stat-number" id="totalPDFs">0</div>
                    <div class="stat-label">PDF Sayƒ±</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-university"></i></div>
                    <div class="stat-number" id="dimCount">0</div>
                    <div class="stat-label">Dƒ∞M</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-school"></i></div>
                    <div class="stat-number" id="kursCount">0</div>
                    <div class="stat-label">Kurs</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-coins"></i></div>
                    <div class="stat-number" id="credits">3</div>
                    <div class="stat-label">Kredit</div>
                </div>
            </div>

            <!-- Search -->
            <div class="search-section">
                <h2 class="section-title">
                    <i class="fas fa-search"></i>
                    Dƒ∞M v…ô Kurs Sƒ±naq Axtarƒ±≈üƒ±
                </h2>
                
                <!-- Quick Filters -->
                <div class="quick-filters">
                    <button class="quick-filter active" onclick="setQuickFilter('all')">Hamƒ±sƒ±</button>
                    <button class="quick-filter" onclick="setQuickFilter('dim')">Dƒ∞M</button>
                    <button class="quick-filter" onclick="setQuickFilter('kurs')">Kurslar</button>
                    <button class="quick-filter" onclick="setQuickFilter('2024')">2024</button>
                    <button class="quick-filter" onclick="setQuickFilter('2025')">2025</button>
                    <button class="quick-filter" onclick="setQuickFilter('2026')">2026</button>
                </div>

                <div class="search-box">
                    <input type="text" class="search-input" id="searchInput" placeholder="M…ôs…ôl…ôn: riyaziyyat, fizika, …ôd…ôbiyyat...">
                    <button class="search-btn" onclick="searchPDFs()">
                        <i class="fas fa-search"></i> Axtar
                    </button>
                </div>
                
                <div class="filters">
                    <div class="filter-group">
                        <label class="filter-label">Sinif</label>
                        <select class="filter-select" id="classFilter" onchange="searchPDFs()">
                            <option value="">B√ºt√ºn sinifl…ôr (5-11)</option>
                            <option value="5">5-ci sinif</option>
                            <option value="6">6-cƒ± sinif</option>
                            <option value="7">7-ci sinif</option>
                            <option value="8">8-ci sinif</option>
                            <option value="9">9-cu sinif (Buraxƒ±lƒ±≈ü)</option>
                            <option value="10">10-cu sinif</option>
                            <option value="11">11-ci sinif (Buraxƒ±lƒ±≈ü)</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">F…ônn</label>
                        <select class="filter-select" id="subjectFilter" onchange="searchPDFs()">
                            <option value="">B√ºt√ºn f…ônl…ôr</option>
                            <option value="riyaziyyat">Riyaziyyat</option>
                            <option value="fizika">Fizika</option>
                            <option value="kimya">Kimya</option>
                            <option value="biologiya">Biologiya</option>
                            <option value="azerbaycan dili">Az…ôrbaycan dili</option>
                            <option value="edebiyyat">∆èd…ôbiyyat</option>
                            <option value="ingilis dili">ƒ∞ngilis dili</option>
                            <option value="tarix">Tarix</option>
                            <option value="cografiya">Coƒürafiya</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">M…ônb…ô</label>
                        <select class="filter-select" id="sourceFilter" onchange="searchPDFs()">
                            <option value="">Hamƒ±sƒ±</option>
                            <option value="Dƒ∞M">D√∂vl…ôt ƒ∞mtahan M…ôrk…ôzi</option>
                            <option value="Kurs">Kurslar (Z…ôman…ôt, ƒ∞drak, etc.)</option>
                            <option value="M…ôkt…ôb">M…ôkt…ôb Sƒ±naqlarƒ±</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">ƒ∞l</label>
                        <select class="filter-select" id="yearFilter" onchange="searchPDFs()">
                            <option value="">B√ºt√ºn ill…ôr</option>
                            <option value="2026">2026</option>
                            <option value="2025">2025</option>
                            <option value="2024">2024</option>
                            <option value="2023">2023</option>
                            <option value="2022">2022</option>
                        </select>
                    </div>
                </div>

                <div class="loading" id="loading" style="display: none;">
                    <div class="spinner"></div>
                    <p>üîç Dƒ∞M v…ô kurs sƒ±naqlarƒ± axtarƒ±lƒ±r...</p>
                </div>

                <div id="resultsInfo" style="display: none;" class="results-info">
                    <span class="results-count" id="resultsCount">0 n…ôtic…ô</span>
                    <span id="searchTime">0 saniy…ô</span>
                </div>

                <div id="errorContainer"></div>
                <div class="pdf-grid" id="pdfGrid"></div>
                
                <div class="load-more" id="loadMore" style="display: none;">
                    <button class="load-more-btn" onclick="loadMorePDFs()">
                        <i class="fas fa-plus"></i> Daha √ßox g√∂st…ôr
                    </button>
                </div>
            </div>
        </main>

        <!-- Right Sidebar -->
        <aside class="sidebar">
            <div class="widget">
                <h3 class="widget-title">
                    <i class="fas fa-trophy" style="color: #ffd700;"></i>
                    S…ôviyy…ôniz
                </h3>
                <div class="xp-bar">
                    <div class="xp-fill">8,450 / 10,000 XP</div>
                </div>
                <p style="font-size: 0.9em; color: #666; text-align: center; margin-top: 10px;">
                    Sonrakƒ± s…ôviyy…ôy…ô: 1,550 XP
                </p>
            </div>

            <div class="widget">
                <h3 class="widget-title">
                    <i class="fas fa-clock"></i>
                    Sƒ±naq Taymeri (3 saat)
                </h3>
                <div class="timer-display" id="timerDisplay">03:00:00</div>
                <div class="timer-controls">
                    <button class="btn btn-primary" onclick="startTimer()">
                        <i class="fas fa-play"></i>
                    </button>
                    <button class="btn btn-secondary" onclick="pauseTimer()">
                        <i class="fas fa-pause"></i>
                    </button>
                    <button class="btn btn-secondary" onclick="resetTimer()">
                        <i class="fas fa-redo"></i>
                    </button>
                </div>
            </div>

            <div class="widget">
                <h3 class="widget-title">
                    <i class="fas fa-robot"></i>
                    AI K√∂m…ôk√ßi
                </h3>
                <div class="chat-messages" id="chatMessages">
                    <div style="background: #2a5298; color: white; padding: 10px; border-radius: 10px; margin-bottom: 10px; max-width: 80%;">
                        Salam! Siz…ô hansƒ± f…ônn √ºzr…ô sƒ±naq tapmaqda k√∂m…ôk ed…ô bil…ôr…ôm?
                    </div>
                </div>
                <div class="chat-input">
                    <input type="text" id="chatInput" placeholder="Sualƒ±nƒ±z..." onkeypress="handleChatKey(event)">
                    <button class="btn btn-primary" onclick="sendMessage()">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>

            <div class="widget">
                <h3 class="widget-title">
                    <i class="fas fa-calendar-alt"></i>
                    Yaxƒ±n ƒ∞mtahanlar
                </h3>
                <div style="display: flex; flex-direction: column; gap: 10px; font-size: 0.9em;">
                    <div style="padding: 10px; background: #fee; border-radius: 8px; border-left: 3px solid #e74c3c;">
                        <strong>9-cu sinif</strong><br>
                        <small>15 mart 2025 - Buraxƒ±lƒ±≈ü</small>
                    </div>
                    <div style="padding: 10px; background: #e8f4f8; border-radius: 8px; border-left: 3px solid #3498db;">
                        <strong>11-ci sinif</strong><br>
                        <small>1 iyun 2025 - Buraxƒ±lƒ±≈ü</small>
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Mobile Nav -->
    <nav class="mobile-nav">
        <a href="#" class="mobile-nav-item active">
            <i class="fas fa-home"></i>
            <span>Ana s…ôhif…ô</span>
        </a>
        <a href="#" class="mobile-nav-item" onclick="document.getElementById('searchInput').focus(); return false;">
            <i class="fas fa-search"></i>
            <span>Axtarƒ±≈ü</span>
        </a>
        <a href="#" class="mobile-nav-item" onclick="openPremiumModal(); return false;">
            <i class="fas fa-crown" style="color: #ffd700;"></i>
            <span>Premium</span>
        </a>
        <a href="#" class="mobile-nav-item">
            <i class="fas fa-user"></i>
            <span>Profil</span>
        </a>
    </nav>

    <!-- Toast -->
    <div class="toast" id="toast">
        <i class="fas fa-info-circle"></i>
        <span id="toastMessage">Bildiri≈ü</span>
    </div>

    <!-- PDF.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    
    <script>
        // Variables
        let isAdmin = false;
        let currentPDF = null;
        let pdfDoc = null;
        let timerInterval = null;
        let timerSeconds = 10800;
        let konamiCode = [];
        const correctKonami = ['ArrowUp','ArrowUp','ArrowDown','ArrowDown','ArrowLeft','ArrowRight','ArrowLeft','ArrowRight','b','a'];
        const ADMIN_CODE = '575757';
        let currentPDFs = [];
        let currentPage = 1;
        let currentQuery = '';

        // Dƒ∞M v…ô Kurs a√ßar s√∂zl…ôri
        const searchKeywords = {
            dim: ['DIM', 'Dƒ∞M', 'd√∂vl…ôt imtahan m…ôrk…ôzi', 'buraxƒ±lƒ±≈ü imtahanƒ±', 'q…ôbul imtahanƒ±', 'azerbaijan examination', 'state examination'],
            kurslar: ['zamanet', 'z…ôman…ôt', 'idrok', 'idrak', 'd…ôrslik', 'kurs', 'test', 'sƒ±naq', 'imtahan', 'm…ôkt…ôb', 'school test', 'azerbaijan school'],
            fennler: ['riyaziyyat', 'fizika', 'kimya', 'biologiya', 'azerbaycan dili', 'edebiyyat', 'ingilis dili', 'tarix', 'cografiya', 'matematika', 'physics', 'chemistry', 'biology', 'history', 'geography']
        };

        // Init
        document.addEventListener('DOMContentLoaded', function() {
            loadInitialPDFs();
            setupKonami();
        });

        function setupKonami() {
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.shiftKey && e.key === 'A') {
                    e.preventDefault();
                    openAdminLogin();
                    return;
                }
                
                konamiCode.push(e.key);
                konamiCode = konamiCode.slice(-10);
                
                if (konamiCode.join(',') === correctKonami.join(',')) {
                    openAdminLogin();
                    konamiCode = [];
                }
            });
        }

        // Admin Functions
        function openAdminLogin() {
            document.getElementById('adminLoginModal').classList.add('active');
            document.getElementById('adminCodeInput').focus();
        }

        function closeAdminLogin() {
            document.getElementById('adminLoginModal').classList.remove('active');
        }

        function checkAdminCode() {
            const input = document.getElementById('adminCodeInput').value;
            if (input === ADMIN_CODE) {
                activateAdmin();
                closeAdminLogin();
                showToast('üëë Admin rejimi aktiv!');
            } else {
                showToast('‚ùå Yanlƒ±≈ü kod!');
                document.getElementById('adminCodeInput').value = '';
            }
        }

        function activateAdmin() {
            isAdmin = true;
            document.getElementById('adminBadge').classList.add('active');
            document.getElementById('adminMenuItem').classList.add('active');
            document.getElementById('adminPanel').classList.add('active');
            document.getElementById('credits').textContent = '‚àû';
            document.getElementById('premiumBanner').style.display = 'none';
        }

        function logoutAdmin() {
            isAdmin = false;
            document.getElementById('adminBadge').classList.remove('active');
            document.getElementById('adminMenuItem').classList.remove('active');
            document.getElementById('adminPanel').classList.remove('active');
            document.getElementById('credits').textContent = '3';
            document.getElementById('premiumBanner').style.display = 'block';
            showToast('üö™ Admin rejimind…ôn √ßƒ±xƒ±ldƒ±');
        }

        function toggleAdminPanel() {
            if (!isAdmin) {
                openAdminLogin();
                return;
            }
            document.getElementById('adminPanel').classList.toggle('active');
        }

        // üî• YENƒ∞: √áoxlu m…ônb…ôd…ôn axtarƒ±≈ü
        async function searchPDFs(loadMore = false) {
            const query = document.getElementById('searchInput').value;
            const classFilter = document.getElementById('classFilter').value;
            const subjectFilter = document.getElementById('subjectFilter').value;
            const sourceFilter = document.getElementById('sourceFilter').value;
            const yearFilter = document.getElementById('yearFilter').value;
            
            const loading = document.getElementById('loading');
            const grid = document.getElementById('pdfGrid');
            const errorContainer = document.getElementById('errorContainer');
            
            if (!loadMore) {
                currentPage = 1;
                currentPDFs = [];
                grid.innerHTML = '';
            }
            
            loading.style.display = 'block';
            errorContainer.innerHTML = '';

            const startTime = Date.now();

            try {
                // √áoxlu axtarƒ±≈ü sorƒüularƒ± paralel i≈ül…ôt
                const searches = [];
                
                // 1. ∆èsas axtarƒ±≈ü
                let mainQuery = query || 'azerbaijan school test examination';
                if (classFilter) mainQuery += ` grade ${classFilter}`;
                if (subjectFilter) mainQuery += ` ${subjectFilter}`;
                if (yearFilter) mainQuery += ` ${yearFilter}`;
                
                searches.push(searchArchive(mainQuery, currentPage));
                
                // 2. Dƒ∞M axtarƒ±≈üƒ± (…ôg…ôr m…ônb…ô Dƒ∞Mdirs…ô v…ôya hamƒ±sƒ±)
                if (!sourceFilter || sourceFilter === 'Dƒ∞M') {
                    searches.push(searchArchive('DIM Azerbaijan examination 2024 2025', currentPage, 'Dƒ∞M'));
                    searches.push(searchArchive('d√∂vl…ôt imtahan m…ôrk…ôzi buraxƒ±lƒ±≈ü', currentPage, 'Dƒ∞M'));
                }
                
                // 3. Kurs axtarƒ±≈üƒ±
                if (!sourceFilter || sourceFilter === 'Kurs') {
                    searches.push(searchArchive('z…ôman…ôt kurs sƒ±naq riyaziyyat', currentPage, 'Kurs'));
                    searches.push(searchArchive('idrak kurs imtahan', currentPage, 'Kurs'));
                    searches.push(searchArchive('school test mathematics azerbaijan', currentPage, 'Kurs'));
                }

                // B√ºt√ºn axtarƒ±≈ülarƒ± g√∂zl…ô
                const results = await Promise.all(searches);
                
                // N…ôtic…ôl…ôri birl…ô≈üdir v…ô t…ôkrarlarƒ± sil
                const allDocs = results.flat();
                const uniqueDocs = removeDuplicates(allDocs);
                
                // PDF fayllarƒ±nƒ± yoxla v…ô filtrl…ô
                const validPDFs = [];
                for (let doc of uniqueDocs) {
                    const fileName = await getPDFFileName(doc.identifier);
                    if (fileName) {
                        // M…ônb…ô t…ôyin et
                        let source = 'Dig…ôr';
                        const titleLower = (doc.title || '').toLowerCase();
                        const descLower = (doc.description || '').toLowerCase();
                        
                        if (titleLower.includes('dim') || titleLower.includes('dƒ∞m') || descLower.includes('d√∂vl…ôt imtahan')) {
                            source = 'Dƒ∞M';
                        } else if (titleLower.includes('kurs') || titleLower.includes('z…ôman…ôt') || titleLower.includes('idrak') || titleLower.includes('school')) {
                            source = 'Kurs';
                        } else if (titleLower.includes('m…ôkt…ôb') || titleLower.includes('mekteb')) {
                            source = 'M…ôkt…ôb';
                        }
                        
                        // Filtrl…ôri t…ôtbiq et
                        if (sourceFilter && source !== sourceFilter) continue;
                        
                        // ƒ∞l t…ôyin et
                        let year = '2024';
                        const yearMatch = (doc.title || '').match(/20(2[0-6])/);
                        if (yearMatch) year = yearMatch[0];
                        
                        if (yearFilter && !year.includes(yearFilter)) continue;
                        
                        validPDFs.push({
                            ...doc,
                            fileName: fileName,
                            source: source,
                            year: year
                        });
                    }
                }

                if (!loadMore) {
                    currentPDFs = validPDFs;
                } else {
                    currentPDFs = [...currentPDFs, ...validPDFs];
                }

                // Statistikalarƒ± yenil…ô
                updateStats(validPDFs);
                
                // N…ôtic…ôl…ôri g√∂st…ôr
                if (currentPDFs.length === 0) {
                    errorContainer.innerHTML = `
                        <div class="no-results">
                            <i class="fas fa-search" style="font-size: 3em; color: #ccc; margin-bottom: 20px;"></i>
                            <h3>He√ß bir n…ôtic…ô tapƒ±lmadƒ±</h3>
                            <p>Ba≈üqa a√ßar s√∂zl…ôr sƒ±nayƒ±n v…ô ya filtrl…ôri d…ôyi≈üin</p>
                            <button class="retry-btn" onclick="resetFilters()">Filtrl…ôri sƒ±fƒ±rla</button>
                        </div>
                    `;
                } else {
                    displayPDFs(currentPDFs, loadMore);
                    
                    const searchTime = ((Date.now() - startTime) / 1000).toFixed(1);
                    document.getElementById('resultsInfo').style.display = 'flex';
                    document.getElementById('resultsCount').textContent = `${currentPDFs.length} sƒ±naq tapƒ±ldƒ±`;
                    document.getElementById('searchTime').textContent = `${searchTime} saniy…ô`;
                    
                    // Daha √ßox g√∂st…ôr d√ºym…ôsi
                    document.getElementById('loadMore').style.display = validPDFs.length >= 10 ? 'block' : 'none';
                    
                    showToast(`‚úÖ ${validPDFs.length} yeni sƒ±naq tapƒ±ldƒ±!`);
                }

            } catch (error) {
                console.error('Search error:', error);
                errorContainer.innerHTML = `
                    <div class="error-message">
                        <i class="fas fa-exclamation-triangle"></i> 
                        <strong>X…ôta ba≈ü verdi</strong><br>
                        <small>${error.message}</small><br>
                        <button class="retry-btn" onclick="searchPDFs()" style="margin-top: 10px;">
                            <i class="fas fa-redo"></i> Yenid…ôn c…ôhd et
                        </button>
                    </div>
                `;
            } finally {
                loading.style.display = 'none';
            }
        }

        // Archive.org axtarƒ±≈üƒ±
        async function searchArchive(query, page, forcedSource = null) {
            const url = `https://archive.org/advancedsearch.php?q=${encodeURIComponent(query)}+format:pdf&fl[]=identifier&fl[]=title&fl[]=creator&fl[]=description&fl[]=downloads&fl[]=year&sort[]=downloads+desc&rows=20&page=${page}&output=json`;
            
            try {
                const response = await fetch(url);
                const data = await response.json();
                return data.response.docs.map(doc => ({
                    ...doc,
                    forcedSource: forcedSource
                }));
            } catch (e) {
                console.error('Archive search error:', e);
                return [];
            }
        }

        // T…ôkrarlarƒ± sil
        function removeDuplicates(docs) {
            const seen = new Set();
            return docs.filter(doc => {
                if (seen.has(doc.identifier)) return false;
                seen.add(doc.identifier);
                return true;
            });
        }

        // Metadata-dan fayl adƒ±nƒ± tapmaq
        async function getPDFFileName(identifier) {
            try {
                const response = await fetch(`https://archive.org/metadata/${identifier}`);
                const data = await response.json();
                
                if (data.files && data.files.length > 0) {
                    const pdfFiles = data.files.filter(f => {
                        const name = f.name.toLowerCase();
                        return name.endsWith('.pdf') && 
                               !name.includes('_chocr') &&
                               !name.includes('_djvu') &&
                               !name.includes('_epub') &&
                               !name.includes('_mobi') &&
                               !name.includes('_txt') &&
                               name.length > 4;
                    });
                    
                    if (pdfFiles.length > 0) {
                        // ∆èsas faylƒ± se√ß
                        const mainFile = pdfFiles.find(f => f.name === `${identifier}.pdf`) || 
                                        pdfFiles.find(f => f.name.includes('_text')) ||
                                        pdfFiles.find(f => f.name.includes('book')) ||
                                        pdfFiles[0];
                        return mainFile.name;
                    }
                }
                return null;
            } catch (error) {
                console.error('Metadata error:', error);
                return null;
            }
        }

        // Statistikalarƒ± yenil…ô
        function updateStats(docs) {
            document.getElementById('totalPDFs').textContent = currentPDFs.length;
            
            const dimCount = currentPDFs.filter(d => d.source === 'Dƒ∞M').length;
            const kursCount = currentPDFs.filter(d => d.source === 'Kurs').length;
            
            document.getElementById('dimCount').textContent = dimCount;
            document.getElementById('kursCount').textContent = kursCount;
            document.getElementById('adminPdfCount').textContent = currentPDFs.length;
        }

        // PDF-l…ôri g√∂st…ôr
        function displayPDFs(docs, append = false) {
            const grid = document.getElementById('pdfGrid');
            
            if (!append) grid.innerHTML = '';
            
            const html = docs.map((doc, i) => {
                const isPremium = !isAdmin && i > 5;
                const sourceColor = doc.source === 'Dƒ∞M' ? '#e74c3c' : 
                                   doc.source === 'Kurs' ? '#27ae60' : '#3498db';
                
                return `
                    <div class="pdf-card" style="animation: fadeIn 0.5s ease ${i * 0.1}s both;">
                        <div class="pdf-header">
                            <div class="pdf-icon"><i class="fas fa-file-pdf"></i></div>
                            <div class="pdf-source" style="background: ${sourceColor};">
                                <i class="fas fa-${doc.source === 'Dƒ∞M' ? 'university' : doc.source === 'Kurs' ? 'school' : 'book'}"></i>
                                ${doc.source}
                            </div>
                            <div class="pdf-year">${doc.year}</div>
                            ${isPremium ? '<div class="pdf-badge">PREMIUM</div>' : ''}
                        </div>
                        <div class="pdf-info">
                            <div class="pdf-title">${escapeHtml(doc.title || 'Sƒ±naq PDF')}</div>
                            <div class="pdf-details">
                                <span class="pdf-detail"><i class="fas fa-graduation-cap"></i> ${doc.class || '√úmumi'}</span>
                                <span class="pdf-detail"><i class="fas fa-download"></i> ${(doc.downloads || 0).toLocaleString()}</span>
                            </div>
                            <div class="pdf-meta">
                                <i class="fas fa-user"></i> ${escapeHtml(doc.creator || 'Dƒ∞M / Kurs')}
                            </div>
                            <div class="pdf-actions">
                                <button class="btn btn-primary" onclick="viewPDF('${doc.identifier}', '${doc.fileName}', '${escapeHtml(doc.title)}')">
                                    <i class="fas fa-eye"></i> Bax
                                </button>
                                <a href="https://archive.org/download/${doc.identifier}/${doc.fileName}" 
                                   class="btn btn-success" 
                                   target="_blank"
                                   onclick="showToast('‚¨áÔ∏è Y√ºkl…ônir...')">
                                    <i class="fas fa-download"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            if (append) {
                grid.innerHTML += html;
            } else {
                grid.innerHTML = html;
            }
        }

        // Daha √ßox y√ºkl…ô
        function loadMorePDFs() {
            currentPage++;
            searchPDFs(true);
        }

        // S√ºr…ôtli filtrl…ôr
        function setQuickFilter(type) {
            document.querySelectorAll('.quick-filter').forEach(f => f.classList.remove('active'));
            event.target.classList.add('active');
            
            const sourceFilter = document.getElementById('sourceFilter');
            const yearFilter = document.getElementById('yearFilter');
            
            if (type === 'dim') sourceFilter.value = 'Dƒ∞M';
            else if (type === 'kurs') sourceFilter.value = 'Kurs';
            else if (['2024', '2025', '2026'].includes(type)) yearFilter.value = type;
            else {
                sourceFilter.value = '';
                yearFilter.value = '';
            }
            
            searchPDFs();
        }

        function filterBySource(source) {
            document.getElementById('sourceFilter').value = source;
            searchPDFs();
            showToast(`üîç ${source} sƒ±naqlarƒ± g√∂st…ôrilir`);
        }

        function resetFilters() {
            document.getElementById('searchInput').value = '';
            document.getElementById('classFilter').value = '';
            document.getElementById('subjectFilter').value = '';
            document.getElementById('sourceFilter').value = '';
            document.getElementById('yearFilter').value = '';
            document.querySelectorAll('.quick-filter').forEach(f => f.classList.remove('active'));
            document.querySelector('.quick-filter').classList.add('active');
            searchPDFs();
        }

        // PDF Viewer
        async function viewPDF(identifier, fileName, title) {
            currentPDF = { identifier, fileName, title };
            document.getElementById('pdfTitle').textContent = title || 'Sƒ±naq PDF';
            document.getElementById('pdfModal').classList.add('active');
            
            const url = `https://archive.org/download/${identifier}/${fileName}`;
            
            try {
                pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
                pdfDoc = await pdfjsLib.getDocument(url).promise;
                
                const page = await pdfDoc.getPage(1);
                const canvas = document.getElementById('pdfCanvas');
                const ctx = canvas.getContext('2d');
                const viewport = page.getViewport({ scale: 1.2 });
                
                canvas.height = viewport.height;
                canvas.width = viewport.width;
                
                await page.render({ canvasContext: ctx, viewport: viewport }).promise;
                showToast('üìÑ Sƒ±naq a√ßƒ±ldƒ±!');
                
            } catch (error) {
                console.error('PDF error:', error);
                showToast('‚ùå Birba≈üa y√ºkl…ôm…ô a√ßƒ±lƒ±r...');
                window.open(url, '_blank');
            }
        }

        function closePDFViewer() {
            document.getElementById('pdfModal').classList.remove('active');
            pdfDoc = null;
        }

        function downloadCurrentPDF() {
            if (currentPDF) {
                const url = `https://archive.org/download/${currentPDF.identifier}/${currentPDF.fileName}`;
                window.open(url, '_blank');
                showToast('‚¨áÔ∏è Y√ºkl…ônir...');
            }
        }

        // Timer
        function startTimer() {
            if (timerInterval) return;
            timerInterval = setInterval(() => {
                if (timerSeconds > 0) {
                    timerSeconds--;
                    updateTimer();
                } else {
                    pauseTimer();
                    showToast('‚è∞ Vaxt bitdi!');
                }
            }, 1000);
            showToast('‚ñ∂Ô∏è Taymer ba≈üladƒ±');
        }

        function pauseTimer() {
            clearInterval(timerInterval);
            timerInterval = null;
            showToast('‚è∏Ô∏è Taymer dayandƒ±');
        }

        function resetTimer() {
            pauseTimer();
            timerSeconds = 10800;
            updateTimer();
            showToast('üîÑ Sƒ±fƒ±rlandƒ±');
        }

        function updateTimer() {
            const h = Math.floor(timerSeconds / 3600);
            const m = Math.floor((timerSeconds % 3600) / 60);
            const s = timerSeconds % 60;
            document.getElementById('timerDisplay').textContent = 
                `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
        }

        // Chat
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const msg = input.value.trim();
            if (!msg) return;
            
            const chat = document.getElementById('chatMessages');
            chat.innerHTML += `<div style="text-align: right; margin-bottom: 10px;"><span style="background: #e0e0e0; padding: 8px 12px; border-radius: 15px;">${msg}</span></div>`;
            input.value = '';
            chat.scrollTop = chat.scrollHeight;
            
            setTimeout(() => {
                const replies = [
                    'Riyaziyyat sƒ±naqlarƒ± √º√ß√ºn 9-cu sinifi se√ßin',
                    'Dƒ∞M-in son buraxƒ±lƒ±≈ü imtahanlarƒ± 2024-2025 m√∂vcuddur',
                    'Z…ôman…ôt kursunun sƒ±naqlarƒ±nƒ± "Kurs" filtri il…ô tapa bil…ôrsiniz',
                    'Premium il…ô limitsiz y√ºkl…ôm…ô edin'
                ];
                chat.innerHTML += `<div style="margin-bottom: 10px;"><span style="background: #2a5298; color: white; padding: 8px 12px; border-radius: 15px;">${replies[Math.floor(Math.random() * replies.length)]}</span></div>`;
                chat.scrollTop = chat.scrollHeight;
            }, 1000);
        }

        function handleChatKey(e) {
            if (e.key === 'Enter') sendMessage();
        }

        // Dig…ôr funksiyalar
        function toggleTheme() {
            const body = document.body;
            const isDark = body.style.background === 'rgb(26, 26, 46)';
            body.style.background = isDark ? '#f0f2f5' : '#1a1a2e';
            body.style.color = isDark ? '#333' : '#fff';
            showToast(isDark ? '‚òÄÔ∏è ƒ∞≈üƒ±qlƒ± rejim' : 'üåô Qaranlƒ±q rejim');
        }

        function showSection(section) {
            showToast(`üìç ${section} b√∂lm…ôsi`);
        }

        function openPremiumModal() {
            if (isAdmin) {
                showToast('üëë Siz artƒ±q adminsiniz!');
                return;
            }
            showToast('üí≥ Premium s…ôhif…ôsi');
        }

        function addNewPDF() {
            const title = prompt('Sƒ±naq ba≈ülƒ±ƒüƒ±:');
            if (title) showToast(`‚úÖ ${title} …ôlav…ô edildi`);
        }

        function refreshAllPDFs() {
            showToast('üîÑ B√ºt√ºn sƒ±naqlar yenil…ônir...');
            searchPDFs();
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            document.getElementById('toastMessage').textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        function escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text.substring(0, 100); // Maksimum 100 simvol
            return div.innerHTML;
        }

        function loadInitialPDFs() {
            document.getElementById('searchInput').value = 'azerbaijan school test';
            searchPDFs();
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closePDFViewer();
                closeAdminLogin();
            }
        });

        document.getElementById('adminCodeInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') checkAdminCode();
        });
    </script>
</body>
</html>
