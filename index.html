<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SINAQLAR.AZ - B√ºt√ºn Kurslarƒ±n Sƒ±naq PDF-l…ôri</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        /* Header */
        .header {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            padding: 15px 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 30px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 2em;
            font-weight: bold;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            color: #ffd700;
            -webkit-text-fill-color: #ffd700;
        }

        .header-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .admin-badge {
            display: none;
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #333;
            padding: 8px 20px;
            border-radius: 25px;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        .admin-badge.active {
            display: block;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .btn-icon {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border: none;
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1em;
        }

        .btn-icon:hover {
            transform: scale(1.1) rotate(10deg);
        }

        /* Main Container */
        .main-container {
            max-width: 1600px;
            margin: 100px auto 20px;
            padding: 20px;
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 25px;
        }

        @media (max-width: 1200px) {
            .main-container {
                grid-template-columns: 1fr;
            }
            .sidebar {
                display: none;
            }
        }

        /* Sidebar */
        .sidebar {
            position: sticky;
            top: 100px;
            height: calc(100vh - 120px);
            overflow-y: auto;
        }

        .panel {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        .panel-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #1e3c72;
        }

        /* Kurs List */
        .kurs-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
            max-height: 400px;
            overflow-y: auto;
        }

        .kurs-item {
            padding: 12px 15px;
            background: #f8f9fa;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.95em;
            border: 2px solid transparent;
        }

        .kurs-item:hover, .kurs-item.active {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            transform: translateX(5px);
            border-color: #ffd700;
        }

        .kurs-item i {
            color: #ffd700;
        }

        /* Content */
        .content {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        /* Admin Panel */
        .admin-panel {
            display: none;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            border: 3px solid #ffd700;
            position: relative;
            overflow: hidden;
        }

        .admin-panel::before {
            content: 'üëë';
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 150px;
            opacity: 0.05;
        }

        .admin-panel.active {
            display: block;
            animation: slideDown 0.5s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .admin-title {
            font-size: 1.5em;
            color: #ffd700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .admin-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .admin-stat {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid rgba(255,215,0,0.3);
        }

        .admin-stat i {
            font-size: 2em;
            color: #ffd700;
            margin-bottom: 10px;
        }

        .admin-stat-value {
            font-size: 1.8em;
            font-weight: bold;
            color: white;
        }

        .admin-stat-label {
            font-size: 0.85em;
            opacity: 0.8;
            margin-top: 5px;
        }

        .admin-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .admin-btn {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #333;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .admin-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(255,215,0,0.4);
        }

        /* Search Section */
        .search-section {
            margin-bottom: 30px;
        }

        .search-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .search-header h1 {
            font-size: 2em;
            color: #1e3c72;
            margin-bottom: 10px;
        }

        .search-header p {
            color: #666;
        }

        .search-box {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 20px;
        }

        .search-input {
            flex: 1;
            padding: 18px 25px;
            border: 2px solid #e0e0e0;
            border-radius: 30px;
            font-size: 16px;
            outline: none;
            transition: all 0.3s;
        }

        .search-input:focus {
            border-color: #2a5298;
            box-shadow: 0 0 0 4px rgba(42,82,152,0.1);
        }

        .search-btn {
            padding: 18px 35px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }

        .search-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(42,82,152,0.3);
        }

        /* Filters */
        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .filter-box {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .filter-label {
            font-size: 0.9em;
            font-weight: 600;
            color: #555;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .filter-select {
            padding: 14px 18px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            background: white;
            font-size: 15px;
            cursor: pointer;
            outline: none;
            transition: all 0.3s;
        }

        .filter-select:focus {
            border-color: #2a5298;
        }

        /* Quick Tags */
        .quick-tags {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 25px;
        }

        .tag {
            padding: 10px 20px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tag:hover, .tag.active {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            border-color: transparent;
            transform: translateY(-2px);
        }

        /* Results Info */
        .results-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, #e8f4f8 0%, #d4e9f2 100%);
            padding: 20px 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border-left: 5px solid #2a5298;
        }

        .results-count {
            font-size: 1.2em;
            font-weight: bold;
            color: #1e3c72;
        }

        .results-meta {
            color: #666;
            font-size: 0.9em;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 60px;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 5px solid #e0e0e0;
            border-top-color: #2a5298;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 25px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 1.2em;
            color: #666;
        }

        .loading-kurs {
            color: #2a5298;
            font-weight: bold;
            margin-top: 10px;
        }

        /* PDF Grid */
        .pdf-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
        }

        .pdf-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.3s;
            border: 2px solid #e0e0e0;
            position: relative;
        }

        .pdf-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
            border-color: #2a5298;
        }

        .pdf-header {
            height: 220px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            position: relative;
            padding: 25px;
            text-align: center;
        }

        .pdf-icon {
            font-size: 5em;
            margin-bottom: 15px;
            filter: drop-shadow(0 5px 15px rgba(0,0,0,0.3));
        }

        .pdf-kurs {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255,215,0,0.95);
            color: #333;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.85em;
            display: flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .pdf-year {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.95);
            color: #333;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .pdf-sinif {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(0,0,0,0.6);
            color: white;
            padding: 6px 14px;
            border-radius: 15px;
            font-size: 0.85em;
        }

        .pdf-badge {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #333;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.8em;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .pdf-body {
            padding: 25px;
        }

        .pdf-title {
            font-size: 1.15em;
            font-weight: bold;
            color: #333;
            margin-bottom: 12px;
            line-height: 1.4;
            height: 3.2em;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .pdf-meta {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 20px;
            color: #666;
            font-size: 0.9em;
        }

        .pdf-meta-row {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .pdf-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .btn {
            padding: 14px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
            text-decoration: none;
        }

        .btn-view {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
        }

        .btn-download {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }

        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        /* No Results */
        .no-results {
            text-align: center;
            padding: 80px 40px;
            color: #666;
        }

        .no-results i {
            font-size: 5em;
            color: #ddd;
            margin-bottom: 25px;
        }

        .no-results h3 {
            font-size: 1.5em;
            color: #333;
            margin-bottom: 15px;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 2000;
        }

        .modal.active {
            display: flex;
            flex-direction: column;
        }

        .modal-header {
            background: #1a1a2e;
            color: white;
            padding: 20px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.3em;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .modal-actions {
            display: flex;
            gap: 12px;
        }

        .modal-btn {
            background: rgba(255,255,255,0.15);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .modal-btn:hover {
            background: rgba(255,255,255,0.25);
        }

        .pdf-viewer {
            flex: 1;
            background: #2d2d2d;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 20px;
            overflow: auto;
        }

        #pdfCanvas {
            max-width: 100%;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
            background: white;
        }

        /* Admin Login Modal */
        .admin-login-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 5000;
            justify-content: center;
            align-items: center;
        }

        .admin-login-modal.active {
            display: flex;
        }

        .admin-login-box {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border: 4px solid #ffd700;
            border-radius: 25px;
            padding: 50px;
            text-align: center;
            max-width: 450px;
            width: 90%;
            color: white;
            position: relative;
        }

        .admin-login-box::before {
            content: 'üîê';
            font-size: 60px;
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: #1a1a2e;
            padding: 0 20px;
            border-radius: 50%;
        }

        .admin-login-box h2 {
            color: #ffd700;
            margin: 30px 0 20px;
            font-size: 1.8em;
        }

        .admin-code-input {
            width: 100%;
            padding: 18px;
            font-size: 20px;
            border: 3px solid #ffd700;
            border-radius: 15px;
            background: rgba(0,0,0,0.3);
            color: white;
            text-align: center;
            letter-spacing: 8px;
            margin: 25px 0;
            outline: none;
        }

        .admin-code-input:focus {
            box-shadow: 0 0 20px rgba(255,215,0,0.3);
        }

        .admin-login-btn {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #333;
            border: none;
            padding: 15px 40px;
            border-radius: 30px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
        }

        .admin-login-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(255,215,0,0.4);
        }

        .admin-hint {
            margin-top: 25px;
            color: rgba(255,255,255,0.6);
            font-size: 0.9em;
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: white;
            color: #333;
            padding: 18px 30px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            display: none;
            align-items: center;
            gap: 12px;
            z-index: 4000;
            font-weight: 500;
            border-left: 5px solid #2a5298;
        }

        .toast.show {
            display: flex;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* Progress Bar */
        .progress-container {
            background: #e0e0e0;
            border-radius: 10px;
            height: 8px;
            margin: 20px 0;
            overflow: hidden;
            display: none;
        }

        .progress-container.active {
            display: block;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        /* Mobile Nav */
        .mobile-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 15px;
            box-shadow: 0 -10px 40px rgba(0,0,0,0.1);
            z-index: 1000;
            justify-content: space-around;
        }

        @media (max-width: 768px) {
            .mobile-nav {
                display: flex;
            }
            .main-container {
                margin-bottom: 90px;
            }
        }

        .mobile-nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #666;
            text-decoration: none;
            font-size: 0.8em;
            gap: 6px;
            transition: all 0.3s;
        }

        .mobile-nav-item.active {
            color: #2a5298;
            transform: scale(1.1);
        }

        .mobile-nav-item i {
            font-size: 1.4em;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-graduation-cap"></i>
                SINAQLAR.AZ
            </div>
            <div class="header-actions">
                <span class="admin-badge" id="adminBadge">
                    <i class="fas fa-crown"></i> ADMIN
                </span>
                <button class="btn-icon" onclick="toggleTheme()" title="Tema">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="btn-icon" onclick="openAdminLogin()" title="Admin Giri≈üi">
                    <i class="fas fa-user-shield"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Admin Login Modal -->
    <div class="admin-login-modal" id="adminLoginModal">
        <div class="admin-login-box">
            <h2>Admin Giri≈üi</h2>
            <p>≈û…ôxsi kodunuzu daxil edin</p>
            <input type="password" class="admin-code-input" id="adminCodeInput" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" maxlength="6">
            <button class="admin-login-btn" onclick="checkAdminCode()">
                <i class="fas fa-unlock"></i> Giri≈ü Et
            </button>
            <div class="admin-hint">
                <i class="fas fa-keyboard"></i> Klaviatura qƒ±sayolu: Ctrl+Shift+A<br>
                <i class="fas fa-gamepad"></i> Konami kodu: ‚Üë‚Üë‚Üì‚Üì‚Üê‚Üí‚Üê‚ÜíBA
            </div>
        </div>
    </div>

    <!-- PDF Viewer Modal -->
    <div class="modal" id="pdfModal">
        <div class="modal-header">
            <div class="modal-title">
                <i class="fas fa-file-pdf" style="color: #e74c3c;"></i>
                <span id="pdfTitle">Sƒ±naq PDF</span>
            </div>
            <div class="modal-actions">
                <button class="modal-btn" onclick="downloadCurrentPDF()">
                    <i class="fas fa-download"></i> Y√ºkl…ô
                </button>
                <button class="modal-btn" onclick="closePDFViewer()" style="background: rgba(231, 76, 60, 0.3);">
                    <i class="fas fa-times"></i> Baƒüla
                </button>
            </div>
        </div>
        <div class="pdf-viewer">
            <canvas id="pdfCanvas"></canvas>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Left Sidebar -->
        <aside class="sidebar">
            <!-- Kurslar Paneli -->
            <div class="panel">
                <div class="panel-title">
                    <i class="fas fa-school" style="color: #2a5298;"></i>
                    Kurslar (60+)
                </div>
                <div class="kurs-list" id="kursList">
                    <!-- Kurslar JS il…ô doldurulacaq -->
                </div>
            </div>

            <!-- Admin Panel -->
            <div class="panel admin-panel" id="adminPanel">
                <div class="admin-header" style="margin-bottom: 15px;">
                    <div class="admin-title" style="font-size: 1.2em;">
                        <i class="fas fa-crown"></i> Admin
                    </div>
                </div>
                <div class="admin-actions" style="flex-direction: column;">
                    <button class="admin-btn" onclick="refreshAllKurslar()" style="width: 100%; justify-content: center;">
                        <i class="fas fa-sync"></i> Yenil…ô
                    </button>
                    <button class="admin-btn" onclick="exportData()" style="width: 100%; justify-content: center;">
                        <i class="fas fa-download"></i> Export
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="content">
            <!-- Search Section -->
            <div class="search-section">
                <div class="search-header">
                    <h1>üîç B√ºt√ºn Kurslarƒ±n Sƒ±naq PDF-l…ôri</h1>
                    <p>60+ kurs v…ô Dƒ∞M-in sƒ±naq imtahanlarƒ± bir platformada</p>
                </div>

                <div class="search-box">
                    <input type="text" class="search-input" id="searchInput" placeholder="F…ônn axtarƒ±n: riyaziyyat, fizika, kimya...">
                    <button class="search-btn" onclick="searchAllKurslar()">
                        <i class="fas fa-search"></i> Axtarƒ±≈ü Ba≈ülat
                    </button>
                </div>

                <!-- Progress Bar -->
                <div class="progress-container" id="progressContainer">
                    <div class="progress-bar" id="progressBar"></div>
                </div>

                <!-- Filters -->
                <div class="filters-grid">
                    <div class="filter-box">
                        <label class="filter-label">
                            <i class="fas fa-graduation-cap" style="color: #2a5298;"></i> Sinif
                        </label>
                        <select class="filter-select" id="sinifFilter">
                            <option value="">B√ºt√ºn sinifl…ôr (5-11)</option>
                            <option value="5">5-ci sinif</option>
                            <option value="6">6-cƒ± sinif</option>
                            <option value="7">7-ci sinif</option>
                            <option value="8">8-ci sinif</option>
                            <option value="9">9-cu sinif (Buraxƒ±lƒ±≈ü)</option>
                            <option value="10">10-cu sinif</option>
                            <option value="11">11-ci sinif (Buraxƒ±lƒ±≈ü)</option>
                        </select>
                    </div>
                    <div class="filter-box">
                        <label class="filter-label">
                            <i class="fas fa-book" style="color: #27ae60;"></i> F…ônn
                        </label>
                        <select class="filter-select" id="fennFilter">
                            <option value="">B√ºt√ºn f…ônl…ôr</option>
                            <option value="riyaziyyat">Riyaziyyat</option>
                            <option value="fizika">Fizika</option>
                            <option value="kimya">Kimya</option>
                            <option value="biologiya">Biologiya</option>
                            <option value="azerbaycan dili">Az…ôrbaycan dili</option>
                            <option value="edebiyyat">∆èd…ôbiyyat</option>
                            <option value="ingilis dili">ƒ∞ngilis dili</option>
                            <option value="tarix">Tarix</option>
                            <option value="cografiya">Coƒürafiya</option>
                            <option value="rus dili">Rus dili</option>
                        </select>
                    </div>
                    <div class="filter-box">
                        <label class="filter-label">
                            <i class="fas fa-calendar" style="color: #e74c3c;"></i> ƒ∞l
                        </label>
                        <select class="filter-select" id="ilFilter">
                            <option value="">B√ºt√ºn ill…ôr</option>
                            <option value="2026">2026</option>
                            <option value="2025">2025</option>
                            <option value="2024">2024</option>
                            <option value="2023">2023</option>
                            <option value="2022">2022</option>
                        </select>
                    </div>
                    <div class="filter-box">
                        <label class="filter-label">
                            <i class="fas fa-filter" style="color: #9b59b6;"></i> N√∂v
                        </label>
                        <select class="filter-select" id="novFilter">
                            <option value="">B√ºt√ºn n√∂vl…ôr</option>
                            <option value="movzu">M√∂vzu Sƒ±naƒüƒ±</option>
                            <option value="umumi">√úmumi Sƒ±naq</option>
                            <option value="buraxilis">Buraxƒ±lƒ±≈ü</option>
                            <option value="blok">Blok</option>
                        </select>
                    </div>
                </div>

                <!-- Quick Tags -->
                <div class="quick-tags">
                    <span class="tag active" onclick="quickSearch('all')">
                        <i class="fas fa-th-large"></i> Hamƒ±sƒ±
                    </span>
                    <span class="tag" onclick="quickSearch('dim')">
                        <i class="fas fa-university"></i> Dƒ∞M
                    </span>
                    <span class="tag" onclick="quickSearch('guven')">
                        <i class="fas fa-book"></i> G√ºv…ôn
                    </span>
                    <span class="tag" onclick="quickSearch('hedef')">
                        <i class="fas fa-bullseye"></i> H…ôd…ôf
                    </span>
                    <span class="tag" onclick="quickSearch('2025')">
                        <i class="fas fa-calendar"></i> 2025
                    </span>
                    <span class="tag" onclick="quickSearch('9')">
                        <i class="fas fa-graduation-cap"></i> 9-cu sinif
                    </span>
                    <span class="tag" onclick="quickSearch('11')">
                        <i class="fas fa-graduation-cap"></i> 11-ci sinif
                    </span>
                </div>

                <!-- Results Info -->
                <div class="results-info" id="resultsInfo" style="display: none;">
                    <span class="results-count" id="resultsCount">0 sƒ±naq tapƒ±ldƒ±</span>
                    <span class="results-meta" id="resultsMeta">0 kursdan ‚Ä¢ 0 saniy…ô</span>
                </div>

                <!-- Loading -->
                <div class="loading" id="loading" style="display: none;">
                    <div class="loading-spinner"></div>
                    <div class="loading-text">Kurslar axtarƒ±lƒ±r...</div>
                    <div class="loading-kurs" id="loadingKurs">Hazƒ±rlanƒ±r...</div>
                </div>

                <!-- PDF Grid -->
                <div class="pdf-grid" id="pdfGrid"></div>

                <!-- No Results -->
                <div class="no-results" id="noResults" style="display: none;">
                    <i class="fas fa-search"></i>
                    <h3>N…ôtic…ô tapƒ±lmadƒ±</h3>
                    <p>Ba≈üqa a√ßar s√∂zl…ôr sƒ±nayƒ±n v…ô ya filtrl…ôri d…ôyi≈üin</p>
                </div>
            </div>
        </main>
    </div>

    <!-- Mobile Nav -->
    <nav class="mobile-nav">
        <a href="#" class="mobile-nav-item active">
            <i class="fas fa-home"></i>
            <span>Ana s…ôhif…ô</span>
        </a>
        <a href="#" class="mobile-nav-item" onclick="document.getElementById('searchInput').focus(); return false;">
            <i class="fas fa-search"></i>
            <span>Axtarƒ±≈ü</span>
        </a>
        <a href="#" class="mobile-nav-item" onclick="openAdminLogin(); return false;">
            <i class="fas fa-crown" style="color: #ffd700;"></i>
            <span>Premium</span>
        </a>
        <a href="#" class="mobile-nav-item">
            <i class="fas fa-user"></i>
            <span>Profil</span>
        </a>
    </nav>

    <!-- Toast -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle" style="color: #27ae60;"></i>
        <span id="toastMessage">Bildiri≈ü</span>
    </div>

    <!-- PDF.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    
    <script>
        // ========== B√úT√úN KURSLAR Sƒ∞YAHISI ==========
        const butunKurslar = [
            // N…ô≈üriyyatlar
            { ad: 'G√ºv…ôn N…ô≈üriyyatƒ±', axtarƒ±≈ü: ['g√ºv…ôn n…ô≈üriyyat', 'guven nesriyyat', 'guven test', 'g√ºv…ôn sƒ±naq'], icon: 'book' },
            { ad: 'H…ôd…ôf N…ô≈üriyyatƒ±', axtarƒ±≈ü: ['h…ôd…ôf n…ô≈üriyyat', 'hedef nesriyyat', 'hedef test'], icon: 'bullseye' },
            { ad: 'D…ôy…ôr N…ô≈üriyyatƒ±', axtarƒ±≈ü: ['d…ôy…ôr n…ô≈üriyyat', 'deyer nesriyyat'], icon: 'gem' },
            { ad: 'Everest N…ô≈üriyyatƒ±', axtarƒ±≈ü: ['everest n…ô≈üriyyat', 'everest nesriyyat', 'everest test'], icon: 'mountain' },
            { ad: '√áinar Yayƒ±mlarƒ±', axtarƒ±≈ü: ['√ßinar yayƒ±mlarƒ±', 'chinar nesriyyat', 'chinar test'], icon: 'tree' },
            
            // Kurslar
            { ad: 'H…ôd…ôf Kurslarƒ± (Ateka)', axtarƒ±≈ü: ['h…ôd…ôf kurslarƒ±', 'hedef kurslarƒ±', 'ateka kurs', 'hedef hazƒ±rlƒ±q'], icon: 'graduation-cap' },
            { ad: 'Kaspi Kurslarƒ±', axtarƒ±≈ü: ['kaspi kurslarƒ±', 'kaspi hazƒ±rlƒ±q', 'kaspi test'], icon: 'university' },
            { ad: 'Z…ôf…ôr Kurslarƒ±', axtarƒ±≈ü: ['z…ôf…ôr kurslarƒ±', 'zefer kurslarƒ±', 'zefer hazƒ±rlƒ±q'], icon: 'trophy' },
            { ad: 'Uƒüur Hazƒ±rlƒ±q Kurslarƒ±', axtarƒ±≈ü: ['uƒüur hazƒ±rlƒ±q', 'ugur kurslarƒ±', 'ugur hazƒ±rlƒ±q'], icon: 'star' },
            { ad: 'Kainat T…ôdris M…ôrk…ôzi', axtarƒ±≈ü: ['kainat t…ôdris', 'kainat kurs', 'kainat hazƒ±rlƒ±q'], icon: 'globe' },
            { ad: 'Sinan Sƒ±naq M…ôrk…ôzi', axtarƒ±≈ü: ['sinan sƒ±naq', 'sinan kurs', 'sinan test'], icon: 'clipboard-check' },
            { ad: 'Zirv…ô Kurslarƒ±', axtarƒ±≈ü: ['zirv…ô kurslarƒ±', 'zirve kurslarƒ±', 'zirve hazƒ±rlƒ±q'], icon: 'arrow-up' },
            { ad: 'Ulduz Hazƒ±rlƒ±q M…ôrk…ôzi', axtarƒ±≈ü: ['ulduz hazƒ±rlƒ±q', 'ulduz kurs', 'ulduz test'], icon: 'star' },
            { ad: 'Araz Kurslarƒ±', axtarƒ±≈ü: ['araz kurslarƒ±', 'araz hazƒ±rlƒ±q', 'araz test'], icon: 'road' },
            { ad: 'Landau School', axtarƒ±≈ü: ['landau school', 'landau test', 'landau sƒ±naq'], icon: 'school' },
            { ad: 'ƒ∞st…ôk Hazƒ±rlƒ±q Kurslarƒ±', axtarƒ±≈ü: ['ist…ôk hazƒ±rlƒ±q', 'istek kurs', 'istek test'], icon: 'heart' },
            { ad: 'Bakƒ± Modern T…ôdris', axtarƒ±≈ü: ['bakƒ± modern', 'baki modern', 'modern kurs'], icon: 'building' },
            { ad: 'Oxford School Azerbaijan', axtarƒ±≈ü: ['oxford school azerbaijan', 'oxford test', 'oxford sƒ±naq'], icon: 'book-open' },
            { ad: 'CELT Colleges', axtarƒ±≈ü: ['celt colleges', 'celt test', 'celt sƒ±naq'], icon: 'language' },
            { ad: 'Level Up T…ôdris', axtarƒ±≈ü: ['level up t…ôdris', 'level up kurs', 'levelup'], icon: 'level-up-alt' },
            { ad: 'Elm Kurslarƒ±', axtarƒ±≈ü: ['elm kurslarƒ±', 'elm hazƒ±rlƒ±q', 'elm test'], icon: 'flask' },
            { ad: 'T…ôdris M…ôrk…ôzi "Z…ôka"', axtarƒ±≈ü: ['z…ôka t…ôdris', 'zeka kurs', 'zeka test'], icon: 'brain' },
            { ad: 'Evrika Liseyi', axtarƒ±≈ü: ['evrika liseyi', 'evrika test', 'evrika sƒ±naq'], icon: 'lightbulb' },
            { ad: 'ƒ∞drak Liseyi', axtarƒ±≈ü: ['idrak liseyi', 'idrak test', 'idrak sƒ±naq'], icon: 'eye' },
            { ad: 'XXI ∆èsr T…ôdris', axtarƒ±≈ü: ['xxi …ôsr t…ôdris', '21ci …ôsr', 'xxi kurs'], icon: 'clock' },
            { ad: 'Vektor T…ôdris', axtarƒ±≈ü: ['vektor t…ôdris', 'vektor kurs', 'vektor test'], icon: 'compass' },
            { ad: 'Pifaqor Kurslarƒ±', axtarƒ±≈ü: ['pifaqor kurslarƒ±', 'pifagor kurs', 'pifaqor test'], icon: 'square-root-alt' },
            { ad: 'Master Sƒ±naq', axtarƒ±≈ü: ['master sƒ±naq', 'master kurs', 'master test'], icon: 'user-graduate' },
            { ad: 'Genius T…ôdris', axtarƒ±≈ü: ['genius t…ôdris', 'genius kurs', 'genius test'], icon: 'brain' },
            { ad: 'Alfa T…ôdris', axtarƒ±≈ü: ['alfa t…ôdris', 'alfa kurs', 'alfa test'], icon: 'alpha' },
            { ad: 'Lider Hazƒ±rlƒ±q', axtarƒ±≈ü: ['lider hazƒ±rlƒ±q', 'lider kurs', 'lider test'], icon: 'crown' },
            { ad: 'Sabah Kurslarƒ±', axtarƒ±≈ü: ['sabah kurslarƒ±', 'sabah hazƒ±rlƒ±q', 'sabah test'], icon: 'sun' },
            { ad: 'Paradigma T…ôdris', axtarƒ±≈ü: ['paradigma t…ôdris', 'paradigma kurs'], icon: 'shapes' },
            { ad: 'Dost Hazƒ±rlƒ±q', axtarƒ±≈ü: ['dost hazƒ±rlƒ±q', 'dost kurs', 'dost test'], icon: 'users' },
            { ad: 'Abituriyent Hazƒ±rlƒ±q (AHM)', axtarƒ±≈ü: ['abituriyent hazƒ±rlƒ±q', 'ahm kurs', 'ahm test'], icon: 'user-tie' },
            { ad: 'Milli T…ôhsil M…ôrk…ôzi', axtarƒ±≈ü: ['milli t…ôhsil', 'milli kurs', 'milli test'], icon: 'flag' },
            { ad: 'Bakƒ± Sƒ±naq M…ôrk…ôzi', axtarƒ±≈ü: ['bakƒ± sƒ±naq', 'baki sinaq', 'baku test'], icon: 'city' },
            { ad: 'Sumqayƒ±t T…ôdris (STM)', axtarƒ±≈ü: ['sumqayƒ±t t…ôdris', 'stm kurs', 'sumqayƒ±t test'], icon: 'industry' },
            { ad: 'G…ônc…ô Sƒ±naq M…ôrk…ôzi', axtarƒ±≈ü: ['g…ônc…ô sƒ±naq', 'gence sinaq', 'gence test'], icon: 'landmark' },
            { ad: 'Nax√ßƒ±van Sƒ±naq', axtarƒ±≈ü: ['nax√ßƒ±van sƒ±naq', 'naxcivan test', 'naxcivan kurs'], icon: 'mosque' },
            { ad: 'S…ômt Kurslarƒ±', axtarƒ±≈ü: ['s…ômt kurslarƒ±', 'semt kurs', 'semt test'], icon: 'map-marker-alt' },
            { ad: 'Delta T…ôdris', axtarƒ±≈ü: ['delta t…ôdris', 'delta kurs', 'delta test'], icon: 'calculator' },
            { ad: 'X…ôms…ô Hazƒ±rlƒ±q', axtarƒ±≈ü: ['x…ôms…ô hazƒ±rlƒ±q', 'xemse kurs', 'xemse test'], icon: 'star-of-david' },
            { ad: 'Bilgi Payla≈üƒ±m', axtarƒ±≈ü: ['bilgi payla≈üƒ±m', 'bilgi kurs', 'bilgi test'], icon: 'share-alt' },
            { ad: 'Bilim T√ºrkiy…ô', axtarƒ±≈ü: ['bilim t√ºrkiy…ô', 'bilim turkey', 'bilim test'], icon: 'globe-europe' },
            
            // Dini/ƒ∞ctimai
            { ad: 'D…ôyan…ôt V…ôqfi', axtarƒ±≈ü: ['d…ôyan…ôt v…ôqfi', 'diyanet vakfi', 'deyanet test'], icon: 'mosque' },
            
            // Onlayn Platformalar
            { ad: 'E-imtahan.az', axtarƒ±≈ü: ['e-imtahan', 'e imtahan', 'eimtahan test'], icon: 'laptop' },
            { ad: 'Oxuyan.az', axtarƒ±≈ü: ['oxuyan az', 'oxuyan test', 'oxuyan sƒ±naq'], icon: 'book-reader' },
            { ad: 'Eduaz Platformasƒ±', axtarƒ±≈ü: ['eduaz', 'edu az', 'eduaz test'], icon: 'chalkboard-teacher' },
            
            // Dƒ∞M
            { ad: 'Dƒ∞M (D√∂vl…ôt ƒ∞mtahan M…ôrk…ôzi)', axtarƒ±≈ü: ['dim', 'd√∂vl…ôt imtahan m…ôrk…ôzi', 'otk', 'buraxƒ±lƒ±≈ü imtahanƒ±', 'q…ôbul imtahanƒ±'], icon: 'university', dim: true }
        ];

        // Variables
        let isAdmin = false;
        let currentPDF = null;
        let pdfDoc = null;
        let konamiCode = [];
        const correctKonami = ['ArrowUp','ArrowUp','ArrowDown','ArrowDown','ArrowLeft','ArrowRight','ArrowLeft','ArrowRight','b','a'];
        const ADMIN_CODE = '575757';
        let allResults = [];
        let activeKurs = null;

        // Init
        document.addEventListener('DOMContentLoaded', function() {
            renderKurslar();
            setupKonami();
            showToast('üëã SINAQLAR.AZ-a xo≈ü g…ôlmisiniz! Kurs se√ßin v…ô ya axtarƒ±≈ü edin.');
        });

        // Render Kurslar
        function renderKurslar() {
            const list = document.getElementById('kursList');
            list.innerHTML = butunKurslar.map((kurs, index) => `
                <div class="kurs-item ${index === 0 ? 'active' : ''}" onclick="selectKurs(${index})">
                    <i class="fas fa-${kurs.icon}"></i>
                    <span>${kurs.ad}</span>
                </div>
            `).join('');
        }

        function selectKurs(index) {
            activeKurs = butunKurslar[index];
            
            // UI update
            document.querySelectorAll('.kurs-item').forEach((el, i) => {
                el.classList.toggle('active', i === index);
            });
            
            // Auto search
            document.getElementById('searchInput').value = activeKurs.axtarƒ±≈ü[0];
            searchAllKurslar();
            
            showToast(`üîç ${activeKurs.ad} axtarƒ±lƒ±r...`);
        }

        // Konami
        function setupKonami() {
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.shiftKey && e.key === 'A') {
                    e.preventDefault();
                    openAdminLogin();
                    return;
                }
                
                konamiCode.push(e.key);
                konamiCode = konamiCode.slice(-10);
                
                if (konamiCode.join(',') === correctKonami.join(',')) {
                    openAdminLogin();
                    konamiCode = [];
                }
            });
        }

        // Admin
        function openAdminLogin() {
            document.getElementById('adminLoginModal').classList.add('active');
            document.getElementById('adminCodeInput').focus();
        }

        function closeAdminLogin() {
            document.getElementById('adminLoginModal').classList.remove('active');
        }

        function checkAdminCode() {
            const input = document.getElementById('adminCodeInput').value;
            if (input === ADMIN_CODE) {
                activateAdmin();
                closeAdminLogin();
                showToast('üëë Admin rejimi aktivl…ô≈üdirildi!');
            } else {
                showToast('‚ùå Yanlƒ±≈ü kod!');
                document.getElementById('adminCodeInput').value = '';
            }
        }

        function activateAdmin() {
            isAdmin = true;
            document.getElementById('adminBadge').classList.add('active');
            document.getElementById('adminPanel').classList.add('active');
            document.getElementById('adminPanel').style.display = 'block';
        }

        function refreshAllKurslar() {
            showToast('üîÑ B√ºt√ºn kurslar yenil…ônir...');
            searchAllKurslar();
        }

        function exportData() {
            const data = JSON.stringify(allResults, null, 2);
            const blob = new Blob([data], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'sinaqlar_export.json';
            a.click();
            showToast('üì• Export tamamlandƒ±!');
        }

        // ========== ∆èSAS AXTARI≈û FUNKSƒ∞YASI ==========
        async function searchAllKurslar() {
            const query = document.getElementById('searchInput').value || 'azerbaijan school test';
            const sinif = document.getElementById('sinifFilter').value;
            const fenn = document.getElementById('fennFilter').value;
            const il = document.getElementById('ilFilter').value;
            const nov = document.getElementById('novFilter').value;
            
            const loading = document.getElementById('loading');
            const grid = document.getElementById('pdfGrid');
            const noResults = document.getElementById('noResults');
            const resultsInfo = document.getElementById('resultsInfo');
            const progressContainer = document.getElementById('progressContainer');
            const progressBar = document.getElementById('progressBar');
            const loadingKurs = document.getElementById('loadingKurs');
            
            // Reset
            loading.style.display = 'block';
            grid.innerHTML = '';
            noResults.style.display = 'none';
            resultsInfo.style.display = 'none';
            progressContainer.classList.add('active');
            allResults = [];
            
            const startTime = Date.now();
            const kurslarAxtarish = activeKurs ? [activeKurs] : butunKurslar;
            const totalKurs = kurslarAxtarish.length;
            
            // H…ôr kurs √º√ß√ºn axtarƒ±≈ü et
            for (let i = 0; i < totalKurs; i++) {
                const kurs = kurslarAxtarish[i];
                const progress = ((i + 1) / totalKurs) * 100;
                progressBar.style.width = `${progress}%`;
                loadingKurs.textContent = `${kurs.ad} axtarƒ±lƒ±r... (${i+1}/${totalKurs})`;
                
                // H…ôr kurs √º√ß√ºn b√ºt√ºn a√ßar s√∂zl…ôri yoxla
                const kursResults = await searchKurs(kurs, {query, sinif, fenn, il, nov});
                allResults = [...allResults, ...kursResults];
                
                // H…ôr 5 kursdan sonra g√∂st…ôr (progressive loading)
                if ((i + 1) % 5 === 0 || i === totalKurs - 1) {
                    displayResults(allResults);
                }
                
                // Ki√ßik gecikm…ô (server overload olmasƒ±n)
                await new Promise(r => setTimeout(r, 300));
            }
            
            // Final
            loading.style.display = 'none';
            progressContainer.classList.remove('active');
            
            const searchTime = ((Date.now() - startTime) / 1000).toFixed(1);
            
            if (allResults.length === 0) {
                noResults.style.display = 'block';
            } else {
                resultsInfo.style.display = 'flex';
                document.getElementById('resultsCount').textContent = `${allResults.length} sƒ±naq tapƒ±ldƒ±`;
                document.getElementById('resultsMeta').textContent = `${kurslarAxtarish.length} kursdan ‚Ä¢ ${searchTime} saniy…ô`;
                showToast(`‚úÖ ${allResults.length} sƒ±naq tapƒ±ldƒ±!`);
            }
        }

        async function searchKurs(kurs, filters) {
            const results = [];
            
            // H…ôr a√ßar s√∂z √º√ß√ºn axtar
            for (let keyword of kurs.axtarƒ±≈ü) {
                let searchQuery = keyword;
                
                // Filtrl…ôri …ôlav…ô et
                if (filters.fenn) searchQuery += ` ${filters.fenn}`;
                if (filters.sinif) searchQuery += ` sinif ${filters.sinif}`;
                if (filters.il) searchQuery += ` ${filters.il}`;
                if (filters.nov) searchQuery += ` ${filters.nov}`;
                
                try {
                    const url = `https://archive.org/advancedsearch.php?q=${encodeURIComponent(searchQuery)}+format:pdf&fl[]=identifier&fl[]=title&fl[]=creator&fl[]=description&fl[]=downloads&fl[]=year&sort[]=downloads+desc&rows=5&output=json`;
                    
                    const response = await fetch(url);
                    const data = await response.json();
                    
                    if (data.response && data.response.docs) {
                        for (let doc of data.response.docs) {
                            // PDF faylƒ±nƒ± tap
                            const fileName = await getPDFFileName(doc.identifier);
                            if (fileName) {
                                // ƒ∞l t…ôyin et
                                let year = filters.il || '2024';
                                const yearMatch = (doc.title || doc.description || '').match(/20(2[0-6])/);
                                if (yearMatch) year = yearMatch[0];
                                
                                // Sinif t…ôyin et
                                let sinif = filters.sinif || '';
                                if (!sinif) {
                                    const sinifMatch = (doc.title || '').match(/(\d+)[-\.]?\s*ci\s*sinif/i) || 
                                                      (doc.title || '').match(/sinif\s*(\d+)/i) ||
                                                      (doc.title || '').match(/(\d+)[-\.]?\s*sƒ±nƒ±f/i);
                                    if (sinifMatch) sinif = sinifMatch[1];
                                }
                                
                                results.push({
                                    ...doc,
                                    fileName: fileName,
                                    kursAdi: kurs.ad,
                                    kursIcon: kurs.icon,
                                    year: year,
                                    sinif: sinif,
                                    fenn: filters.fenn || detectFenn(doc.title),
                                    nov: filters.nov || detectNov(doc.title)
                                });
                            }
                        }
                    }
                } catch (e) {
                    console.error(`${kurs.ad} axtarƒ±≈ü x…ôtasƒ±:`, e);
                }
            }
            
            return results;
        }

        async function getPDFFileName(identifier) {
            try {
                const response = await fetch(`https://archive.org/metadata/${identifier}`);
                const data = await response.json();
                
                if (data.files && data.files.length > 0) {
                    // ∆èsas PDF faylƒ±nƒ± tap
                    const pdfFiles = data.files.filter(f => {
                        const name = f.name.toLowerCase();
                        return name.endsWith('.pdf') && 
                               !name.includes('_chocr') &&
                               !name.includes('_djvu') &&
                               !name.includes('_epub') &&
                               !name.includes('_mobi') &&
                               !name.includes('_txt') &&
                               name.length > 4;
                    });
                    
                    if (pdfFiles.length > 0) {
                        // Prioritet: eyni adlƒ±, sonra _text, sonra …ôn ki√ßik
                        const mainFile = pdfFiles.find(f => f.name === `${identifier}.pdf`) || 
                                        pdfFiles.find(f => f.name.includes('_text')) ||
                                        pdfFiles.find(f => f.name.includes('book')) ||
                                        pdfFiles.reduce((min, f) => f.size < min.size ? f : min, pdfFiles[0]);
                        return mainFile.name;
                    }
                }
                return null;
            } catch (e) {
                return null;
            }
        }

        function detectFenn(title) {
            const titleLower = (title || '').toLowerCase();
            if (titleLower.includes('riyaziyyat') || titleLower.includes('matematik') || titleLower.includes('math')) return 'Riyaziyyat';
            if (titleLower.includes('fizika') || titleLower.includes('physics')) return 'Fizika';
            if (titleLower.includes('kimya') || titleLower.includes('chemistry')) return 'Kimya';
            if (titleLower.includes('biologiya') || titleLower.includes('biology')) return 'Biologiya';
            if (titleLower.includes('azerbaycan') || titleLower.includes('dil')) return 'Az…ôrbaycan dili';
            if (titleLower.includes('edebiyyat') || titleLower.includes('…ôd…ôbiyyat')) return '∆èd…ôbiyyat';
            if (titleLower.includes('ingilis') || titleLower.includes('english')) return 'ƒ∞ngilis dili';
            if (titleLower.includes('tarix') || titleLower.includes('history')) return 'Tarix';
            if (titleLower.includes('cografiya') || titleLower.includes('coƒürafiya') || titleLower.includes('geography')) return 'Coƒürafiya';
            return '√úmumi';
        }

        function detectNov(title) {
            const titleLower = (title || '').toLowerCase();
            if (titleLower.includes('buraxƒ±lƒ±≈ü') || titleLower.includes('buraxilis')) return 'Buraxƒ±lƒ±≈ü';
            if (titleLower.includes('blok')) return 'Blok';
            if (titleLower.includes('movzu') || titleLower.includes('m√∂vzu')) return 'M√∂vzu';
            if (titleLower.includes('√ºmumi') || titleLower.includes('umumi')) return '√úmumi';
            return 'Sƒ±naq';
        }

        function displayResults(results) {
            const grid = document.getElementById('pdfGrid');
            
            // T…ôkrarlarƒ± sil
            const unique = [];
            const seen = new Set();
            for (let r of results) {
                if (!seen.has(r.identifier)) {
                    seen.add(r.identifier);
                    unique.push(r);
                }
            }
            
            allResults = unique;
            
            grid.innerHTML = unique.map((doc, i) => `
                <div class="pdf-card fade-in" style="animation-delay: ${i * 0.05}s;">
                    <div class="pdf-header">
                        <div class="pdf-icon"><i class="fas fa-file-pdf"></i></div>
                        <div class="pdf-kurs">
                            <i class="fas fa-${doc.kursIcon}"></i>
                            ${doc.kursAdi.substring(0, 15)}${doc.kursAdi.length > 15 ? '...' : ''}
                        </div>
                        <div class="pdf-year">${doc.year}</div>
                        ${doc.sinif ? `<div class="pdf-sinif">${doc.sinif}-ci sinif</div>` : ''}
                        ${!isAdmin && i > 10 ? '<div class="pdf-badge">PREMIUM</div>' : ''}
                    </div>
                    <div class="pdf-body">
                        <div class="pdf-title">${escapeHtml(doc.title || 'Sƒ±naq')}</div>
                        <div class="pdf-meta">
                            <div class="pdf-meta-row">
                                <i class="fas fa-book" style="color: #27ae60;"></i>
                                <span>${doc.fenn}</span>
                            </div>
                            <div class="pdf-meta-row">
                                <i class="fas fa-tag" style="color: #e74c3c;"></i>
                                <span>${doc.nov}</span>
                            </div>
                            <div class="pdf-meta-row">
                                <i class="fas fa-download" style="color: #3498db;"></i>
                                <span>${(doc.downloads || 0).toLocaleString()} y√ºkl…ôm…ô</span>
                            </div>
                        </div>
                        <div class="pdf-actions">
                            <button class="btn btn-view" onclick="viewPDF('${doc.identifier}', '${doc.fileName}', '${escapeHtml(doc.title)}')">
                                <i class="fas fa-eye"></i> Bax
                            </button>
                            <a href="https://archive.org/download/${doc.identifier}/${doc.fileName}" 
                               class="btn btn-download" 
                               target="_blank"
                               onclick="showToast('‚¨áÔ∏è Y√ºkl…ônir...')">
                                <i class="fas fa-download"></i> Y√ºkl…ô
                            </a>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Quick Search
        function quickSearch(type) {
            document.querySelectorAll('.tag').forEach(t => t.classList.remove('active'));
            event.target.closest('.tag').classList.add('active');
            
            if (type === 'all') {
                document.getElementById('searchInput').value = '';
                activeKurs = null;
            } else if (type === 'dim') {
                document.getElementById('searchInput').value = 'dim azerbaijan';
                activeKurs = butunKurslar.find(k => k.ad.includes('Dƒ∞M'));
            } else if (type === 'guven') {
                document.getElementById('searchInput').value = 'g√ºv…ôn';
                activeKurs = butunKurslar.find(k => k.ad.includes('G√ºv…ôn'));
            } else if (type === 'hedef') {
                document.getElementById('searchInput').value = 'h…ôd…ôf';
                activeKurs = butunKurslar.find(k => k.ad.includes('H…ôd…ôf'));
            } else if (['9', '11'].includes(type)) {
                document.getElementById('sinifFilter').value = type;
            } else {
                document.getElementById('ilFilter').value = type;
            }
            
            searchAllKurslar();
        }

        // PDF Viewer
        async function viewPDF(identifier, fileName, title) {
            currentPDF = { identifier, fileName, title };
            document.getElementById('pdfTitle').textContent = title || 'Sƒ±naq PDF';
            document.getElementById('pdfModal').classList.add('active');
            
            const url = `https://archive.org/download/${identifier}/${fileName}`;
            
            try {
                pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
                pdfDoc = await pdfjsLib.getDocument(url).promise;
                
                const page = await pdfDoc.getPage(1);
                const canvas = document.getElementById('pdfCanvas');
                const ctx = canvas.getContext('2d');
                const viewport = page.getViewport({ scale: 1.3 });
                
                canvas.height = viewport.height;
                canvas.width = viewport.width;
                
                await page.render({ canvasContext: ctx, viewport: viewport }).promise;
                showToast('üìÑ Sƒ±naq a√ßƒ±ldƒ±!');
                
            } catch (error) {
                console.error('PDF error:', error);
                showToast('‚ùå Birba≈üa y√ºkl…ôm…ô a√ßƒ±lƒ±r...');
                window.open(url, '_blank');
            }
        }

        function closePDFViewer() {
            document.getElementById('pdfModal').classList.remove('active');
            pdfDoc = null;
        }

        function downloadCurrentPDF() {
            if (currentPDF) {
                const url = `https://archive.org/download/${currentPDF.identifier}/${currentPDF.fileName}`;
                window.open(url, '_blank');
                showToast('‚¨áÔ∏è Y√ºkl…ônir...');
            }
        }

        // Utilities
        function toggleTheme() {
            const body = document.body;
            const isDark = body.style.background.includes('1a1a2e');
            if (isDark) {
                body.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            } else {
                body.style.background = '#1a1a2e';
            }
            showToast(isDark ? '‚òÄÔ∏è G√ºnd√ºz rejimi' : 'üåô Gec…ô rejimi');
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            document.getElementById('toastMessage').textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        function escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text.substring(0, 80);
            return div.innerHTML;
        }

        // Keyboard
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closePDFViewer();
                closeAdminLogin();
            }
        });

        document.getElementById('adminCodeInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') checkAdminCode();
        });
    </script>
</body>
</html>
